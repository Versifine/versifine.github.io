# å®æˆ˜ç¬”è®°ï¼šä»å†…å­˜ Map åˆ° GORM æŒä¹…åŒ–

> **æ—¥æœŸ**: 2026-01-23  
> **æ ‡ç­¾**: Go, GORM, Architecture, SQL  
> **åˆ†ç±»**: å®æˆ˜å¤ç›˜

è®°å½•æˆ‘åœ¨å°†åç«¯ä»å†…å­˜å­˜å‚¨å‡çº§ä¸º SQLite çš„å…¨è¿‡ç¨‹ã€‚åŒ…å«å¯¹ GORM æ ¸å¿ƒæœºåˆ¶ï¼ˆSave æ›´æ–°åŸç†ã€`db.Model` å®šä½é€»è¾‘ã€åˆ é™¤æœºåˆ¶ï¼‰çš„æ·±åº¦ä¼ªä»£ç åˆ†æã€‚

---

## å¼•è¨€

åœ¨å®Œæˆäº†ä¸‰å±‚æ¶æ„çš„æ­å»ºåï¼Œæˆ‘çš„åç«¯æœåŠ¡ä¾ç„¶é¢ä¸´ä¸€ä¸ªè‡´å‘½é—®é¢˜ï¼š**é‡å¯å³å¤±å¿†**ã€‚

ä¸ºäº†è®©æ•°æ®æŒä¹…åŒ–ï¼Œæˆ‘å†³å®šå¼•å…¥ GORMã€‚ä½œä¸ºä¸€ä¸ª SQL åŸºç¡€è–„å¼±ä¸”ä¹ æƒ¯äº† C++ æ€ç»´çš„å¼€å‘è€…ï¼Œè¿™ä¸ªè¿‡ç¨‹å¹¶éä¸€å¸†é£é¡ºã€‚æœ¬æ–‡è®°å½•äº†ä»ç¯å¢ƒé€‰æ‹©åˆ°åº•å±‚åŸç†æ‹·é—®çš„å®Œæ•´å¿ƒè·¯å†ç¨‹ã€‚

## ç¬¬ä¸€é˜¶æ®µï¼šæˆ˜æœ¯é€‰æ‹©ä¸ç¯å¢ƒæ­å»º

### 1. SQLite vs MySQLï¼Ÿ

åœ¨ Week 2 é˜¶æ®µï¼Œæˆ‘é€‰æ‹©äº† **SQLite**ã€‚

**ç†ç”±**ï¼š
- å®ƒä¸éœ€è¦å®‰è£…ä»»ä½•æœåŠ¡ï¼Œåªæ˜¯ä¸€ä¸ª `.db` æ–‡ä»¶
- å¯¹äºéªŒè¯æ¶æ„å’Œ GORM é€»è¾‘æ¥è¯´ï¼Œå®ƒå’Œ MySQL 99% é€šç”¨

**æˆ˜ç•¥**ï¼šå¾—ç›Šäºæˆ‘åœ¨æ¶æ„ä¸­ä½¿ç”¨äº† Repository æ¥å£ï¼Œæœªæ¥åˆ‡æ¢åˆ° MySQL åªéœ€ä¿®æ”¹ `main.go` é‡Œçš„è¿æ¥ä»£ç ï¼Œä¸šåŠ¡é€»è¾‘ä¸€è¡Œä¸ç”¨åŠ¨ã€‚

### 2. å®æˆ˜å››æ­¥èµ°

#### Step 1: å®‰è£…æ­¦å™¨

```bash
go get -u gorm.io/gorm
go get -u gorm.io/driver/sqlite
```

#### Step 2: æ”¹é€  Model (å‘Šè¯‰ GORM è¡¨é•¿ä»€ä¹ˆæ ·)

```go
type User struct {
    gorm.Model // è‡ªåŠ¨è·å¾— ID, CreatedAt, UpdatedAt, DeletedAt
    Username string `gorm:"uniqueIndex"` // å”¯ä¸€ç´¢å¼•
    Password string
}
```

#### Step 3: å®ç° Repository (GORM ç‰ˆé›¶ä»¶)

```go
type GormUserRepo struct { db *gorm.DB }

func (r *GormUserRepo) GetUserByUsername(name string) (*model.User, error) {
    var user model.User
    // ç¿»è¯‘ï¼šSELECT * FROM users WHERE username = ? LIMIT 1
    err := r.db.Where("username = ?", name).First(&user).Error
    return &user, err
}
```

#### Step 4: ä¾èµ–æ³¨å…¥ (Main å‡½æ•°æ¢å¿ƒæ‰‹æœ¯)

```go
// 1. è¿æ¥æ–‡ä»¶æ•°æ®åº“
db, _ := gorm.Open(sqlite.Open("test.db"), &gorm.Config{})
db.AutoMigrate(&model.User{}) // è‡ªåŠ¨å»ºè¡¨

// 2. æ›¿æ¢æ‰æ—§çš„å†…å­˜ Repo
userRepo := repository.NewGormUserRepo(db) 
// Service å’Œ Controller å®Œå…¨ä¸çŸ¥æƒ…ï¼ŒæœåŠ¡å¹³æ»‘å‡çº§ï¼
```

## ç¬¬äºŒé˜¶æ®µï¼šçµé­‚æ‹·é—® â€”â€” GORM åˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿ

ä»£ç è·‘é€šäº†ï¼Œä½†æˆ‘çš„ç–‘æƒ‘æ›´å¤šäº†ã€‚GORM åˆ°åº•åœ¨åº•ä¸‹å¹²äº†ä»€ä¹ˆï¼Ÿ

### Q1: ä»€ä¹ˆæ˜¯è¡¨ã€è¡Œã€åˆ—ï¼Ÿ

å¦‚æœä¸æ‡‚ SQLï¼Œå¯ä»¥ç”¨ **Excel** æ¥ç±»æ¯”ï¼š

| æ¦‚å¿µ | ç±»æ¯” | è¯´æ˜ |
|------|------|------|
| **è¡¨ (Table)** | ä¸€ä¸ª Excel æ–‡ä»¶ | `users.xlsx` |
| **åˆ— (Column)** | è¡¨å¤´ | `Username`, `Password`ï¼Œå»ºè¡¨æ—¶å®šå¥½ï¼Œæ˜¯**æ­»çš„** |
| **è¡Œ (Row)** | æ¯ä¸€æ¡æ•°æ® | å…·ä½“çš„ç”¨æˆ·æ•°æ®ï¼Œæ˜¯**æ´»çš„** |

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    users è¡¨                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ID  â”‚   Username   â”‚   Password   â”‚    CreatedAt      â”‚  â† åˆ— (Column)
â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  1   â”‚    admin     â”‚    ****      â”‚   2026-01-01      â”‚  â† è¡Œ (Row)
â”‚  2   â”‚    alice     â”‚    ****      â”‚   2026-01-02      â”‚  â† è¡Œ (Row)
â”‚  3   â”‚     bob      â”‚    ****      â”‚   2026-01-03      â”‚  â† è¡Œ (Row)
â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### GORM çš„æœ¬è´¨

å®ƒæ˜¯ä¸€ä¸ª **ç¿»è¯‘å®˜**ï¼š

- å®ƒæŠŠ Go çš„ **Struct** ç¿»è¯‘æˆ **è¡¨ç»“æ„**
- å®ƒæŠŠ Go çš„ **å¯¹è±¡** ç¿»è¯‘æˆ **æ•°æ®è¡Œ**

### Q2: åŠ ä¸€ä¸ªæ–°å­—æ®µå°±è¦å»ºæ–°è¡¨å—ï¼Ÿ

**è¯¯åŒº**ï¼šæˆ‘ä»¥ä¸ºä¸€è¡Œæ•°æ®æœ‰è¿™ä¸ªå­—æ®µï¼Œå¦ä¸€è¡Œæ²¡æœ‰ï¼Œå°±å¾—æ‹†è¡¨ã€‚

**çœŸç›¸**ï¼šä¸ç”¨ã€‚æ•°æ®åº“æ”¯æŒ `NULL`ï¼ˆç©ºå€¼ï¼‰ã€‚

- åŠ ä¸€åˆ— = è¡¨å¤´å˜å®½äº†
- è€æ•°æ®è¿™åˆ—å¡« `NULL`ï¼Œæ–°æ•°æ®å¡«å…·ä½“å€¼
- åªæœ‰å½“å‡ºç°"ä¸€å¯¹å¤š"ï¼ˆå¦‚ä¸€ä¸ªç”¨æˆ·æœ‰å¤šä¸ªæ‰‹æœºå·ï¼‰æ—¶ï¼Œæ‰éœ€è¦å»ºæ–°è¡¨

## ç¬¬ä¸‰é˜¶æ®µï¼šæ ¸å¿ƒæ“ä½œçš„ä¼ªä»£ç é€è§† (CRUD å®Œå…¨è§£å‰–)

ä¸ºäº†ææ‡‚ GORM çš„é­”æ³•ï¼Œæˆ‘æŠŠ **å¢åˆ æ”¹æŸ¥ (CRUD)** çš„æ¯ä¸€ä¸ªåŠ¨ä½œéƒ½æ‹†è§£æˆäº† "GORM å†™æ³•" vs "SQL" vs "åº•å±‚ä¼ªä»£ç "ã€‚

### 1. æ–°å¢ (Create)

**åœºæ™¯**ï¼šæ³¨å†Œä¸€ä¸ªæ–°ç”¨æˆ·ã€‚

#### GORM ä»£ç 

```go
user := model.User{Username: "new_guy", Password: "123"}
// ä¼ é€’æŒ‡é’ˆï¼Œä¸ºäº†è®© GORM å¡«å›è‡ªå¢ ID
db.Create(&user)
```

#### åº•å±‚ä¼ªä»£ç é€»è¾‘

```go
func Create(val interface{}) {
    // 1. åå°„åˆ†æ: æ‹¿åˆ° User ç»“æ„ä½“çš„æ‰€æœ‰å­—æ®µå (Username, Password...)
    tableName := toSnakeCase(reflect.TypeOf(val).Name) // "User" -> "users"
    
    // 2. è‡ªåŠ¨å¡«è¡¥: CreatedAt, UpdatedAt ä¸ºç©ºï¼Ÿå¡«å…¥ time.Now()
    
    // 3. ç”Ÿæˆ SQL: 
    sql := "INSERT INTO users (username, password, created_at...) VALUES (?, ?, ?...)"
    
    // 4. æ‰§è¡Œå¹¶å›å¡« ID
    driver.Exec(sql)
    fillBackID(val) // æŠŠæ•°æ®åº“ç”Ÿæˆçš„ ID=42 å¡«å› user.ID
}
```

### 2. æŸ¥è¯¢ (Read)

**åœºæ™¯**ï¼šæ ¹æ®ç”¨æˆ·åæ‰¾äººï¼ˆå•æ¡æ•°æ®ï¼‰ã€‚

#### GORM ä»£ç 

```go
var user model.User
// First ä¼šè‡ªåŠ¨åŠ ä¸Š LIMIT 1ï¼Œå¹¶æŠŠç»“æœå¡«è¿› &user
// å¦‚æœæŸ¥ä¸åˆ°ï¼Œä¼šè¿”å› gorm.ErrRecordNotFound
db.Where("username = ?", "admin").First(&user)
```

#### å®é™…ç”Ÿæˆçš„ SQL

```sql
SELECT * FROM `users` 
WHERE username = 'admin' 
AND `users`.`deleted_at` IS NULL  -- è‡ªåŠ¨è¿‡æ»¤æ‰è½¯åˆ é™¤çš„æ•°æ®
ORDER BY `users`.`id` ASC         -- First é»˜è®¤æŒ‰ä¸»é”®æ’åº
LIMIT 1
```

#### åº•å±‚ä¼ªä»£ç é€»è¾‘

```go
func First(dest interface{}) {
    // 1. æ‹¼è£… SQL
    sql := "SELECT * FROM users WHERE username = 'admin' ..."
    
    // 2. æ‰§è¡ŒæŸ¥è¯¢ï¼Œæ‹¿åˆ°"ç”Ÿæ•°æ®" (Rows)
    rows := driver.Query(sql) 
    
    // 3. æ‰«æ (Scan) - è¿™æ˜¯åå°„æœ€ç´¯çš„ä¸€æ­¥
    if rows.Next() {
        // GORM çœ‹ç€ user ç»“æ„ä½“çš„å­—æ®µï¼ŒæŠŠ rows é‡Œçš„æ•°æ®ä¸€ä¸ªä¸ªå¡«è¿›å»
        dest.ID = rows["id"]
        dest.Username = rows["username"]
        // ...
    } else {
        return error("record not found")
    }
}
```

### 3. æ›´æ–° (Update)

**åœºæ™¯**ï¼šä¿®æ”¹å¯†ç ã€‚è¿™é‡Œæœ‰ä¸¤ç§å®Œå…¨ä¸åŒçš„æ¨¡å¼ã€‚

#### æ¨¡å¼ Aï¼šåªæ›´æ–°ç‰¹å®šå­—æ®µ (æ¨è)

```go
// æ˜ç¡®å‘Šè¯‰ GORMï¼šæˆ‘åªæ”¹ password è¿™ä¸€åˆ—
db.Model(&user).Update("password", "new_pass")
// SQL: UPDATE users SET password='new_pass', updated_at=NOW() WHERE id=1;
```

#### æ¨¡å¼ Bï¼šSave (å…¨é‡ä¿å­˜)

```go
user.Password = "new_pass" // å…ˆæ”¹å†…å­˜
db.Save(&user)             // åŒæ­¥åˆ°æ•°æ®åº“
```

#### åº•å±‚ä¼ªä»£ç é€»è¾‘ (Save)

```go
func Save(val interface{}) {
    // 1. æ£€æŸ¥ä¸»é”®: val.ID æœ‰å€¼å—ï¼Ÿ
    if val.ID > 0 {
        // æœ‰ ID -> æ‰§è¡Œ UPDATE
        // æ³¨æ„ï¼šå®ƒä¼šæŠŠç»“æ„ä½“é‡Œçš„ã€æ‰€æœ‰å­—æ®µã€‘éƒ½æ›´æ–°ä¸€éï¼
        // å“ªæ€• Username æ²¡å˜ï¼Œå®ƒä¹Ÿä¼šé‡å†™ä¸€é Username
        sql := "UPDATE users SET password=?, username=?, role=?, updated_at=NOW()... WHERE id=?"
        driver.Exec(sql)
    } else {
        // æ²¡ ID -> æ‰§è¡Œ INSERT (æ–°å¢)
        Create(val)
    }
}
```

> âš ï¸ **Save çš„é™·é˜±**ï¼šå¦‚æœä½ åªæƒ³æ”¹ä¸€ä¸ªå­—æ®µï¼Œç”¨ `Update`ï¼›`Save` ä¼šè¦†ç›–æ‰€æœ‰å­—æ®µï¼Œå¯èƒ½å¯¼è‡´æ„å¤–çš„æ•°æ®è¦†ç›–ã€‚

### 4. åˆ é™¤ (Delete)

**åœºæ™¯**ï¼šåˆ é™¤ç”¨æˆ·ã€‚

#### GORM ä»£ç 

```go
// åªè¦ ID æ˜¯å¯¹çš„ï¼Œå…¶ä»–å­—æ®µä¹±å¡«ä¹Ÿèƒ½åˆ 
db.Delete(&User{ID: 5}) 
```

#### å®é™…ç”Ÿæˆçš„ SQL (è½¯åˆ é™¤ Magic)

å› ä¸º `User` ç»“æ„ä½“åµŒå…¥äº† `gorm.Model`ï¼Œå®ƒæœ‰ `DeletedAt` å­—æ®µã€‚GORM é»˜è®¤æ‰§è¡Œ **è½¯åˆ é™¤**ã€‚

```sql
-- æ³¨æ„ï¼šä¸æ˜¯ DELETE FROM !
UPDATE `users` 
SET `deleted_at` = '2026-01-23 10:10:00' 
WHERE `id` = 5 
AND `deleted_at` IS NULL
```

#### åº•å±‚ä¼ªä»£ç é€»è¾‘

```go
func Delete(val interface{}) {
    // 1. åå°„æ£€æŸ¥ï¼šè¿™ä¸ª struct æœ‰ DeletedAt å­—æ®µå—ï¼Ÿ
    if hasDeletedAtField(val) {
        // æœ‰ -> æ‰§è¡Œ UPDATE (è½¯åˆ é™¤)
        // åªæ˜¯ç»™è¿™æ¡è®°å½•æ‰“ä¸ª"å·²åˆ é™¤"çš„æ ‡è®°ï¼Œä»¥åæŸ¥è¯¢ä¼šè‡ªåŠ¨è¿‡æ»¤å®ƒ
        sql = "UPDATE users SET deleted_at = NOW() WHERE id = ?"
    } else {
        // æ—  -> æ‰§è¡Œ DELETE (çœŸåˆ é™¤/ç‰©ç†åˆ é™¤)
        sql = "DELETE FROM users WHERE id = ?"
    }
    driver.Exec(sql, val.ID)
}
```

### CRUD é€ŸæŸ¥è¡¨

| æ“ä½œ | GORM æ–¹æ³• | SQL åŠ¨ä½œ | å…³é”®ç‚¹ |
|------|-----------|----------|--------|
| **Create** | `db.Create(&user)` | INSERT | ä¼ æŒ‡é’ˆï¼Œå›å¡« ID |
| **Read** | `db.Where().First(&user)` | SELECT | è‡ªåŠ¨è¿‡æ»¤è½¯åˆ é™¤ |
| **Update** | `db.Model(&user).Update()` | UPDATE | æ¨èç²¾ç¡®æ›´æ–° |
| **Update** | `db.Save(&user)` | UPDATE/INSERT | å…¨é‡è¦†ç›–ï¼Œçœ‹ ID |
| **Delete** | `db.Delete(&user)` | UPDATE/DELETE | æœ‰ DeletedAt åˆ™è½¯åˆ  |

## ç¬¬å››é˜¶æ®µï¼šç»ˆæè¿·æƒ‘ â€”â€” db.Model

`db.Model` æ˜¯ GORM é“¾å¼è°ƒç”¨ä¸­æœ€å®¹æ˜“æ··æ·†çš„æ–¹æ³•ã€‚å®ƒå…¶å®æ˜¯ä¸€ä¸ª **"å®šä½å™¨"**ã€‚

### ç”¨æ³• Aï¼šåªå®šè¡¨ (To Table)

å½“æˆ‘ä»¬ä¼ å…¥ä¸€ä¸ª**ç©ºç»“æ„ä½“**æ—¶ï¼š

```go
db.Model(&User{})
```

**å«ä¹‰**ï¼š"GORM å¬ä»¤ï¼Œç›®æ ‡æ˜¯ `users` è¡¨ï¼"

**åœºæ™¯**ï¼šé…åˆ `Where` åšæŸ¥è¯¢ã€‚

```go
var count int64
db.Model(&User{}).Where("role = ?", "admin").Count(&count)
// SQL: SELECT COUNT(*) FROM users WHERE role = 'admin'
```

### ç”¨æ³• Bï¼šæ—¢å®šè¡¨åˆå®šè¡Œ (To Row)

å½“æˆ‘ä»¬ä¼ å…¥ä¸€ä¸ª**å¸¦ ID çš„ç»“æ„ä½“**æ—¶ï¼š

```go
u := User{ID: 100}
db.Model(&u)
```

**å«ä¹‰**ï¼š"GORM å¬ä»¤ï¼Œç›®æ ‡æ˜¯ `users` è¡¨é‡Œçš„ **ç¬¬ 100 å·è®°å½•**ï¼"

**åœºæ™¯**ï¼šé…åˆ `Update` åšæ›´æ–°ã€‚

```go
db.Model(&u).Update("name", "new_name")
// SQL: UPDATE users SET name = 'new_name' WHERE id = 100
```

### db.Model å†³ç­–æµç¨‹å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  db.Model(&obj)                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚   obj.ID == 0 ?                                         â”‚
â”‚       â”‚                                                 â”‚
â”‚       â”œâ”€â”€ Yes â”€â”€> åªå®šä½åˆ°è¡¨ (users)                     â”‚
â”‚       â”‚           é€‚åˆï¼šCount, Find, Where              â”‚
â”‚       â”‚                                                 â”‚
â”‚       â””â”€â”€ No â”€â”€â”€> å®šä½åˆ°è¡¨ + è¡Œ (users WHERE id=?)      â”‚
â”‚                   é€‚åˆï¼šUpdate, Delete                  â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## æ€»ç»“

Week 2 çš„æŒä¹…åŒ–ä¹‹è·¯ï¼Œä¸ä»…æ˜¯ä»£ç çš„è¿ç§»ï¼Œæ›´æ˜¯å¯¹ **ORM (å¯¹è±¡å…³ç³»æ˜ å°„)** æ€æƒ³çš„ç†è§£ã€‚

| æ”¶è· | è¯´æ˜ |
|------|------|
| **æ¥å£è§£è€¦** | è®©åº•å±‚åˆ‡æ¢å¦‚ä¸èˆ¬é¡ºæ»‘ |
| **åå°„æœºåˆ¶** | è®© GORM èƒ½å¤Ÿ"çŒœ"å‡ºæˆ‘ä»¬çš„æ„å›¾ |
| **ä¸»é”®æ€ç»´** | æ˜¯ç†è§£æ•°æ®åº“æ“ä½œçš„æ ¸å¿ƒé’¥åŒ™ |

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    æ¶æ„å‡çº§å‰åå¯¹æ¯”                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚   Before (å†…å­˜å­˜å‚¨)                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                           â”‚
â”‚   â”‚ Service â”‚ â”€â”€> MemoryRepo â”€â”€> map[string]User        â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                           â”‚
â”‚        â†“ é‡å¯                                            â”‚
â”‚     æ•°æ®æ¸…ç©º ğŸ’€                                          â”‚
â”‚                                                         â”‚
â”‚   After (GORM æŒä¹…åŒ–)                                    â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                           â”‚
â”‚   â”‚ Service â”‚ â”€â”€> GormRepo â”€â”€> SQLite â”€â”€> test.db       â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                           â”‚
â”‚        â†“ é‡å¯                                            â”‚
â”‚     æ•°æ®ä¿ç•™ âœ…                                          â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## å»¶ä¼¸é˜…è¯»

- [GORM å®˜æ–¹æ–‡æ¡£](https://gorm.io/docs/) - æœ€æƒå¨çš„å‚è€ƒ
- [SQLite vs MySQL é€‰å‹æŒ‡å—](https://www.sqlite.org/whentouse.html)
- [ä¾èµ–æ³¨å…¥ä¸æ¥å£è®¾è®¡](./web-architecture) - æœ¬ç«™å‰æ–‡
